---
title: Monque
description: A MongoDB-backed job scheduler for Node.js with atomic locking, exponential backoff, cron scheduling, and event-driven observability.
template: splash
hero:
  tagline: Type-safe, reliable job scheduling powered by MongoDB
  image:
    file: ../../assets/logo.svg
  actions:
    - text: Get Started
      link: /monque/getting-started/installation/
      icon: right-arrow
    - text: View on GitHub
      link: https://github.com/ueberBrot/monque
      icon: external
      variant: minimal
---

import { Card, CardGrid, Tabs, TabItem } from '@astrojs/starlight/components';

## Why Monque?

<CardGrid stagger>
	<Card title="Atomic Locking" icon="approve-check">
      Prevents concurrent duplicate processing across multiple schedulers using MongoDB atomic claims. Jobs can still be retried or re-run after crashes, so workers should be idempotent.
	</Card>
	<Card title="Type-Safe" icon="seti:typescript">
		Full TypeScript support with generics for job payloads. Catch errors at compile time, not runtime.
	</Card>
	<Card title="Event-Driven" icon="rocket">
		Subscribe to job lifecycle events (`job:start`, `job:complete`, `job:fail`) for full observability and integration with your logging infrastructure.
	</Card>
	<Card title="Change Streams" icon="pulse">
      Real-time job notifications via MongoDB Change Streams, while polling continues as a safety net.
	</Card>
	<Card title="Exponential Backoff" icon="refresh">
		Automatic retries with configurable backoff formula. Failed jobs retry intelligently without overwhelming your system.
	</Card>
	<Card title="Cron Scheduling" icon="sun">
		Schedule recurring jobs with standard 5-field cron expressions. Automatic rescheduling after successful completion.
	</Card>
</CardGrid>

## Quick Example

```typescript
import { Monque } from '@monque/core';
import { MongoClient } from 'mongodb';

// Connect to MongoDB
const client = new MongoClient('mongodb://localhost:27017');
await client.connect();
const db = client.db('myapp');

// Create scheduler instance
const monque = new Monque(db);
await monque.initialize();

// Define your job data type
interface EmailJob {
  to: string;
  subject: string;
  body: string;
}

// Register a worker with type safety
monque.worker<EmailJob>('send-email', async (job) => {
  console.log(`Sending email to ${job.data.to}`);
  await sendEmail(job.data.to, job.data.subject, job.data.body);
});

// Monitor job lifecycle
monque.on('job:complete', ({ job, duration }) => {
  console.log(`Job ${job.name} completed in ${duration}ms`);
});

// Start processing
monque.start();

// Enqueue a job - it's that simple!
await monque.enqueue('send-email', {
  to: 'user@example.com',
  subject: 'Welcome!',
  body: 'Thanks for signing up.'
});
```

## Installation

<Tabs>
  <TabItem label="bun">
    ```bash
    bun add @monque/core mongodb
    ```
  </TabItem>
  <TabItem label="npm">
    ```bash
    npm install @monque/core mongodb
    ```
  </TabItem>
  <TabItem label="pnpm">
    ```bash
    pnpm add @monque/core mongodb
    ```
  </TabItem>
</Tabs>

## Features at a Glance

| Feature | Description |
|---------|-------------|
| **Atomic Job Claims** | Atomic `findOneAndUpdate` claim to avoid concurrent duplicates |
| **Heartbeat Monitoring** | Detect stale jobs from crashed workers |
| **Change Streams** | Real-time notifications (polling still runs) |
| **Graceful Shutdown** | Wait for in-progress jobs before stopping |
| **Unique Keys** | Prevent duplicate pending/processing jobs |
| **Cron Scheduling** | Standard 5-field cron expression support |
| **Exponential Backoff** | `nextRunAt = now + (2^failCount × baseInterval)` |
| **Event Emission** | Full lifecycle hooks for observability |

## Next Steps

<CardGrid>
	<Card title="Installation Guide" icon="document">
		Learn about prerequisites and detailed setup instructions.
		[Read more →](/monque/getting-started/installation/)
	</Card>
	<Card title="Quick Start Tutorial" icon="rocket">
		Build your first job queue in under 5 minutes.
		[Get started →](/monque/getting-started/quick-start/)
	</Card>
	<Card title="Core Concepts" icon="open-book">
		Understand jobs, workers, and the processing lifecycle.
		[Learn more →](/monque/core-concepts/jobs/)
	</Card>
	<Card title="API Reference" icon="list-format">
		Complete API documentation with TypeScript types.
		[Explore →](/monque/api/readme/)
	</Card>
</CardGrid>
